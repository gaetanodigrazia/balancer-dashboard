<h2>üóÇÔ∏è Eventi Archiviati</h2>

<div *ngIf="getKeys(groupedArchived).length > 0; else noData">
  <div *ngFor="let key of getKeys(groupedArchived)">
    <div class="group-block">
      <h4>
        <span class="badge">{{ key.split(' | ')[0] }}</span>
        <code>{{ key.split(' | ')[1] }}</code>
        ({{ groupedArchived[key].length }})
      </h4>

      <table class="trace-table">
        <thead>
          <tr>
            <th>Timestamp</th><th>Method</th><th>User</th><th>Remote IP</th>
            <th>Area</th><th>Duration (ms)</th><th>Exception</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let e of groupedArchived[key]">
            <td>{{ e.timestamp }}</td>
            <td>{{ e.method }}</td>
            <td>{{ e.userId }}</td>
            <td>{{ e.remoteIp }}</td>
            <td>{{ e.area }}</td>
            <td>{{ e.durationMillis }}</td>
            <td>{{ e.exceptionName || '-' }}</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>

<ng-template #noData>
  <p>Nessun evento archiviato disponibile.</p>
</ng-template>
